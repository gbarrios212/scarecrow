!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=8)}([function(t,e){function s(t){this.pos=t.pos,this.vel=t.vel,this.width=t.width,this.height=t.height,this.image=t.image,this.game=t.game,this.isWrappable=t.isWrappable,this.hp=t.hp}s.prototype.draw=function(t){t.drawImage(this.image,this.pos[0],this.pos[1],this.width,this.height)},s.prototype.move=function(){this.pos=[this.pos[0]+this.vel[0],this.pos[1]+this.vel[1]],this.game.isOutOfBounds(this.pos)&&(this.isWrappable?this.pos=this.game.wrap(this.pos):!this.isWrappable&&this.game.bullets.includes(this)&&this.game.removeBullet(this))},s.prototype.isCollidedWith=function(t){let e={true:"",right:"",left:"",down:"",up:""};if(this.pos[0]<t.pos[0]+t.width&&this.pos[0]+this.width>t.pos[0]&&this.pos[1]<t.pos[1]+t.height&&this.pos[1]+this.height>t.pos[1])return e.true=!0,e.right=this.pos[0]+this.width-t.pos[0],e.left=this.pos[0]-(t.pos[0]+t.width),e.down=this.pos[1]+this.height-t.pos[1],e.up=this.pos[1]-(t.height+t.pos[1]),e},t.exports=s},function(t,e){const s={inherits(t,e){const s=function(){};s.prototype=e.prototype,t.prototype=new s,t.prototype.constructor=t},determineDirection(t){switch(t){case"left":return[-4,0];case"right":return[4,0];case"up":return[0,-4];case"down":return[0,4];default:return[4,0]}}};t.exports=s},function(t,e,s){const i=s(0),o=s(1),n=new Image;function a(t){i.call(this,{pos:t.pos,vel:[0,0],height:30,width:30,image:n,game:t.game,isWrappable:!1,hp:800})}n.src="./corn_late_FINAL.png",o.inherits(a,i),t.exports=a},function(t,e,s){const i=s(0),o=s(2),n=s(1),a=new Image;function r(t){i.call(this,{pos:t.pos,vel:t.vel,height:30,width:30,image:t.image||a,game:t.game,isWrappable:t.isWrappable})}a.src="./bullet.png",n.inherits(r,i),r.prototype.collideWith=function(t){t instanceof o&&(t.hp<=780&&(t.hp+=20),this.game.removeBullet(this))},t.exports=r},function(t,e,s){const i=s(0),o=s(2),n=s(1),a=(s(1),new Image);function r(t){i.call(this,{pos:t.pos,vel:t.vel,height:30,width:30,image:a,game:t.game,isWrappable:!1})}a.src="./angry_heart.png",n.inherits(r,i),r.prototype.collideWith=function(t){t instanceof o&&(t.hp<=780&&(t.hp+=100),this.game.removeBullet(this))},t.exports=r},function(t,e,s){const i=s(0),o=s(6),n=s(3),a=s(2),r=s(1),h=s(4),c=new Image;c.src="crow_bad_OPT.png",(new Image).src="crow_good.png";function l(t){i.call(this,{pos:t.pos,vel:t.vel,width:30,height:30,image:t.image||c,game:t.game,isWrappable:!0,hp:80})}r.inherits(l,i),l.prototype.collideWith=function(t){t instanceof o?t.paralyze():t instanceof n?this.hp<=20?this.game.removeCrow(this):(this.game.removeBullet(t),this.hp-=20):t instanceof h?this.hp<=50?(this.game.removeCrow(this),this.game.removeBullet(this)):(this.game.removeBullet(t),this.hp-=50):t instanceof a&&(10===t.hp?(this.game.gameMap[t.pos[1]/40][t.pos[0]/40]=0,this.game.removeCorn(t)):t.hp-=10)},t.exports=l},function(t,e,s){const i=s(0),o=s(3),n=s(1),a=new Image;a.src="scarecrow_flying_OPT.png";const r=new Image;r.src="blue_heart.png";const h=new Image;function c(t){i.call(this,{pos:[100,100],vel:[0,0],width:60,height:60,image:a,game:t.game,isWrappable:!0}),this.spooked=!1,this.fear=0,this.courage=0}h.src="super_heart.png",n.inherits(c,i),c.prototype.fireBullet=function(){if(!this.spooked){if(k<6)return;let t;if(this.courage>=40){let e=n.determineDirection(b),s=[-1*e[0],-1*e[1]];t=new o({pos:[this.pos[0]+25,this.pos[1]+10],vel:e,game:this.game,isWrappable:!0,image:h}),bullet2=new o({pos:[this.pos[0]+25,this.pos[1]+10],vel:s,game:this.game,isWrappable:!0,image:h}),this.game.bullets.push(bullet2)}else t=this.fear<50?new o({pos:[this.pos[0]+25,this.pos[1]+10],vel:n.determineDirection(b),game:this.game,isWrappable:!1}):new o({pos:[this.pos[0]+25,this.pos[1]+10],vel:n.determineDirection(b),game:this.game,image:r,isWrappable:!1});this.game.bullets.push(t)}};let l,p,d,g,u=!1,m=!1,w=!1,f=!1,y=!1,b="";const v=[0,64,128,192,256,320,384,448,512,576];let M=0,k=0;c.prototype.draw=function(){if(k++,this.spooked||this.scareMove(),l=!1,p=!1,d=!1,g=!1,this.spooked){let t=new Image;return t.src="scarecrow_spooked_FINAL.png",ctx.drawImage(t,0,0,62,62,this.pos[0],this.pos[1],this.width/1.7,this.height/1.7)}if(this.fear>=50){let t=new Image;return t.src="scarecrow_frightened.png",setTimeout(()=>{this.fear=0,gauge=document.getElementById("fear-color"),gauge.style.width="0px"},1e4),ctx.drawImage(t,0,0,64,64,this.pos[0],this.pos[1],this.width,this.height)}if(this.courage>=40&&(a.src="super_scarecrow.png",setTimeout(()=>{this.courage=0,gauge=document.getElementById("courage-color"),gauge.style.width="0px",a.src="scarecrow_flying_OPT.png"},15e3)),k<6)return ctx.drawImage(this.image,v[M],0,this.width,this.height,this.pos[0],this.pos[1],this.width,this.height);k=0,ctx.drawImage(this.image,v[M],0,this.width,this.height,this.pos[0],this.pos[1],this.width,this.height),++M>=v.length&&(M=0)},document.addEventListener("keydown",(function(t){"Right"==t.key||"ArrowRight"==t.key||"d"==t.key?(u=!0,b="right"):"Left"==t.key||"ArrowLeft"==t.key||"a"==t.key?(m=!0,b="left"):"Up"==t.key||"ArrowUp"==t.key||"w"==t.key?(w=!0,b="up"):"Down"==t.key||"ArrowDown"==t.key||"s"==t.key?(f=!0,b="down"):" "!=t.key&&"Spacebar"!=t.key||(y=!0)}),!1),document.addEventListener("keyup",(function(t){"Right"==t.key||"ArrowRight"==t.key||"d"==t.key?u=!1:"Left"==t.key||"ArrowLeft"==t.key||"a"==t.key?m=!1:"Up"==t.key||"ArrowUp"==t.key||"w"==t.key?w=!1:"Down"==t.key||"ArrowDown"==t.key||"s"==t.key?f=!1:" "!=t.key&&"Spacebar"!=t.key||(y=!1)}),!1),c.prototype.scareMove=function(){u&!p?this.fear<50&&this.courage<40?this.game.scarecrow.pos[0]+=3:this.courage>=40?this.game.scarecrow.pos[0]+=9:this.game.scarecrow.pos[0]+=.5:m&&!l?this.fear<50&&this.courage<40?this.game.scarecrow.pos[0]-=3:this.courage>=40?this.game.scarecrow.pos[0]-=9:this.game.scarecrow.pos[0]-=.5:f&&!g?this.fear<50&&this.courage<40?this.game.scarecrow.pos[1]+=3:this.courage>=40?this.game.scarecrow.pos[1]+=9:this.game.scarecrow.pos[1]+=.5:w&&!d?this.fear<50&&this.courage<40?this.game.scarecrow.pos[1]-=3:this.courage>=40?this.game.scarecrow.pos[1]-=9:this.game.scarecrow.pos[1]-=.5:y&&this.game.scarecrow.fireBullet()},c.prototype.paralyze=function(){this.fear<50&&this.courage<40&&(this.spooked=!0,setTimeout(()=>{this.spooked=!1,this.fear+=.15},3e3),gauge=document.getElementById("fear-color"),pixels=(this.fear+.15)/50*350,gauge.style.width=`${pixels}px`)},c.prototype.collideWith=function(t,e){this.courage<40&&(m&&Math.abs(e.left)<=3&&Math.abs(e.left)<Math.abs(e.down)?l=!0:m&&Math.abs(e.left)<=3&&Math.abs(e.left)>Math.abs(e.down)&&(l=!1),m&&Math.abs(e.left)<=3&&Math.abs(e.up)>=3?l=!0:m&&Math.abs(e.left)<=3&&Math.abs(e.up)<=3?l=!1:u&&Math.abs(e.right)<=3&&Math.abs(e.down)>3?p=!0:u&&Math.abs(e.right)<=3&&Math.abs(e.down)<=3?p=!1:u&&Math.abs(e.right)<=3&&Math.abs(e.up)>3?p=!0:u&&Math.abs(e.right)<=3&&Math.abs(e.up)<=3?p=!1:w&&Math.abs(e.up)<=3&&Math.abs(e.up)<Math.abs(e.left)?d=!0:w&&Math.abs(e.up)<=3&&Math.abs(e.up)>Math.abs(e.left)?d=!1:w&&Math.abs(e.up)<=3&&Math.abs(e.up)<Math.abs(e.right)?d=!0:w&&Math.abs(e.up)<=3&&Math.abs(e.up)>Math.abs(e.right)?d=!1:f&&Math.abs(e.down)<=3&&Math.abs(e.down)<Math.abs(e.left)?g=!0:f&&Math.abs(e.down)<=3&&Math.abs(e.down)>Math.abs(e.left)?g=!1:f&&Math.abs(e.down)<=3&&Math.abs(e.down)<Math.abs(e.right)?g=!0:f&&Math.abs(e.down)<=3&&Math.abs(e.down)>Math.abs(e.right)&&(g=!1))},t.exports=c},function(t,e,s){const o=s(5),n=s(6),a=s(3),r=s(4),h=s(2),c=s(9),l=800,p=400,d=new Image;d.src="crow_good.png";const g=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];function u(){let t;for(this.crows=[],this.bullets=[],this.corns=[],this.towers=[],this.towersAvail=4,this.fillInventory(),this.scarecrow=new n({game:this}),this.img=new Image,this.img.src="farmland_later_single.png",this.gameMap=JSON.parse(JSON.stringify(g)),this.addCorns(),this.crowSpawn=5,this.grid=document.getElementById("preview-grid"),tile=1;tile<this.gameMap.length*this.gameMap[0].length+1;tile++)(t=document.createElement("div")).id=tile,this.grid.appendChild(t);this.coords={x:0,y:0},this.tileCol,this.tileRow,this.elem=document.getElementById("scarecrow-canvas"),this.elemLeft=this.elem.offsetLeft,this.elemTop=this.elem.offsetTop,w=w.bind(this),document.addEventListener("mousemove",w),f=f.bind(this),document.addEventListener("click",f),setInterval(()=>{this.addCrows()},15e3)}function m(t,e){return t<800&&t>=0&&e<400&&e>=0}function w(t){if(this.coords.x=t.pageX-this.elemLeft,this.coords.y=t.pageY-this.elemTop,m(this.coords.x,this.coords.y)){this.tileCol=Math.floor(this.coords.y/40),this.tileRow=Math.floor(this.coords.x/40),1!==this.gameMap[this.tileCol][this.tileRow]?this.grid.classList.add("good"):this.grid.classList.remove("good")}}function f(t){if(m(this.coords.x,this.coords.y)){if(1!==this.gameMap[this.tileCol][this.tileRow]&&!window.paused){let t=40*this.tileRow+2,e=40*this.tileCol;angryTower=new c({pos:[t,e],game:this}),this.towers.push(angryTower),this.gameMap[this.tileCol][this.tileRow]=1,invSlot=document.getElementById(`inv-${this.towersAvail}`),this.towersAvail-=1,invSlot.innerHTML=""}0===this.towersAvail&&(document.removeEventListener("click",f),document.removeEventListener("mousemove",w),this.grid.classList.remove("good"),this.grid.id="preview-grid-off")}}u.prototype.fillInventory=function(){for(i=0;i<4;i++)invSlot=document.getElementById(`inv-${i+1}`),invSlot.innerHTML='<img src="angry_boy_single.png"/>'};let y=new Image;y.src="corn_field_later_single.png",u.prototype.draw=function(t){let e=t.createPattern(this.img,"repeat"),s=t.createPattern(y,"repeat");window.time<90&&(this.img.src="farmland_later_1.5_single.png",y.src="corn_field_later_2_single.png"),window.time<60&&(y.src="corn_field_later_3_single.png"),window.time<30&&(this.img.src="farmland_later_4_single.png",y.src="corn_field_later_4_single.png");for(let i=0;i<10;i++)for(let o=0;o<20;o++){switch(this.gameMap[i][o]){case 0:t.fillStyle=e;break;default:t.fillStyle=s}t.fillRect(40*o,40*i,40,40)}this.allObjects().forEach(e=>e.draw(t))},u.prototype.addCrows=function(){for(0===window.time&&this.crows.push(new o({pos:this.randomPosition(),vel:this.randomVelocity(),game:this,image:d}));this.crows.length<this.crowSpawn;)this.crows.push(new o({pos:this.randomPosition(),vel:this.randomVelocity(),game:this}));this.crowSpawn*=1.2},u.prototype.addCorns=function(){for(let t=0;t<10;t++)for(let e=0;e<20;e++)switch(this.gameMap[t][e]){case 1:this.corns.push(new h({pos:[40*e,40*t],game:this}))}},u.prototype.randomPosition=function(){let t=[];switch(Math.floor(10*Math.random())%4){case 0:t.push(Math.floor(Math.random()*l)),t.push(750);break;case 1:t.push(Math.floor(Math.random()*l)),t.push(2);break;case 2:case 3:t.push(0),t.push(Math.floor(Math.random()*p))}return t},u.prototype.randomVelocity=function(){let t=[];switch(window.time){case 135:t.push(.5*Math.random()*this.sign()),t.push(.5*Math.random()*this.sign());break;case 120:t.push(1*Math.random()*this.sign()),t.push(1*Math.random()*this.sign());break;case 105:t.push(1.5*Math.random()*this.sign()),t.push(1.5*Math.random()*this.sign());break;case 90:t.push(Math.random()*this.sign()),t.push(2*Math.random()*this.sign());break;case 75:t.push(-1*Math.random()*this.sign()),t.push(1.5*Math.random()*this.sign());break;case 60:t.push(2*Math.random()*this.sign()),t.push(2*Math.random()*this.sign());break;case 45:t.push(-2.5*Math.random()*this.sign()),t.push(2.5*Math.random()*this.sign());break;case 30:t.push(3*Math.random()*this.sign()),t.push(-3*Math.random()*this.sign());break;case 15:t.push(-4*Math.random()*this.sign()),t.push(4*Math.random()*this.sign());break;case 0:t=[0,0]}return t},u.prototype.allObjects=function(){return this.crows.concat(this.scarecrow,this.bullets,this.corns,this.towers)},u.prototype.sign=function(){switch(Math.floor(10*Math.random())%2){case 0:return-1;default:return 1}},u.prototype.moveObjects=function(){this.allObjects().forEach(t=>t.move())},u.prototype.wrap=function(t){return t[0]>l?t[0]=0:t[0]<0&&(t[0]=l),t[1]>p?t[1]=0:t[1]<0&&(t[1]=p),t},u.prototype.isOutOfBounds=function(t){return t[0]>l||t[0]<0||t[1]>p||t[1]<0},u.prototype.checkCollisions=function(){this.allObjects().forEach((t,e)=>{this.allObjects().forEach((s,i)=>{if(e!==i&&t.isCollidedWith(s))if(t instanceof o&&s instanceof n)t.collideWith(s);else if(t instanceof o&&s instanceof a)t.collideWith(s);else if(t instanceof o&&s instanceof r)t.collideWith(s);else if(t instanceof r&&s instanceof h)t.collideWith(s);else if(t instanceof o&&s instanceof h)t.collideWith(s);else if(t instanceof n&&s instanceof h){let e=t.isCollidedWith(s);t.collideWith(s,e)}else t instanceof a&&s instanceof h&&t.collideWith(s)})})},u.prototype.step=function(){this.moveObjects(),this.checkCollisions(),this.didLose()?this.end("lose"):0===window.time&&this.end("win")},u.prototype.removeCrow=function(t){let e=this.crows.indexOf(t);this.crows.splice(e,1)},u.prototype.removeBullet=function(t){let e=this.bullets.indexOf(t);this.bullets.splice(e,1)},u.prototype.removeCorn=function(t){let e=this.corns.indexOf(t);this.corns.splice(e,1),this.scarecrow.courage+=1,gauge=document.getElementById("courage-color"),pixels=this.scarecrow.courage/40*350,gauge.style.width=`${pixels}px`},u.prototype.didLose=function(){return 0===this.corns.length},u.prototype.end=function(t){switch(t){case"win":clearInterval(window.clockFunc),clearInterval(window.gameFunc),win=document.getElementById("win-sheet"),win.id="win-sheet-on";break;case"lose":clearInterval(window.clockFunc),clearInterval(window.gameFunc),lose=document.getElementById("lose-sheet"),lose.id="lose-sheet-on",restart=document.getElementById("lose-restart"),restart.addEventListener("click",()=>{lose.id="lose-sheet"})}},t.exports=u},function(t,e,s){s(0),s(5),s(7);const i=s(10);document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("scarecrow-canvas").getContext("2d");t.imageSmoothingEnabled=!1;const e=document.getElementById("main-content-sheet");document.addEventListener("click",(function(h){if(h.target===s){e.id="main-content-sheet-off",n.id="bars",o.id="inventory",clearInterval(window.clockFunc),clearInterval(window.gameFunc),a.innerHTML="2:30",a.classList.add("on"),window.time=150,window.clockFunc=setInterval(r,1e3),gameView=new i(t),gameView.start();const s=document.getElementById("pause-sheet");window.paused=!1,s.classList.remove("on")}}));const s=document.getElementById("start-button"),o=(document.getElementById("instruction"),document.getElementById("instructions-sheet"),document.getElementById("inventory-off")),n=document.getElementById("bars-off"),a=document.getElementById("clock");function r(){if(!window.paused){time-=1;let t=Math.floor(time/60),e=time%60;a.innerHTML=0===e?t+" : "+e+"0":e<10?t+" : 0"+e:t+" : "+e}}window.paused,document.addEventListener("keydown",(function(t){const e=document.getElementById("pause-sheet");"p"!==t.key&&"P"!==t.key||(window.paused?window.paused&&(window.paused=!1,e.classList.remove("on")):(window.paused=!0,e.classList.add("on")))})),document.getElementById("restart-button").addEventListener("click",(function(e){clearInterval(window.clockFunc),clearInterval(window.gameFunc),a.innerHTML="2:30",window.time=150,window.clockFunc=setInterval(r,1e3);const s=document.getElementById("pause-sheet");(document.getElementById("preview-grid-off")||document.getElementById("preview-grid")).id="preview-grid",window.paused=!1,s.classList.remove("on"),gameView=new i(t),gameView.start()})),window.clock=document.getElementById("clock"),a.innerHTML="2:30",window.time=150,window.ctx=t}))},function(t,e,s){const i=s(0),o=s(4),n=s(1),a=new Image;function r(t){i.call(this,{pos:t.pos,vel:[0,0],width:64,height:64,image:a,game:t.game,isWrappable:!1}),setInterval(()=>{this.fireBullet()},5e3)}a.src="angry_boy.png",n.inherits(r,i),r.prototype.fireBullet=function(){let t=new o({pos:[this.pos[0]+25,this.pos[1]],vel:[1,0],game:this.game,isWrappable:!1}),e=new o({pos:[this.pos[0]-25,this.pos[1]],vel:[-1,0],game:this.game,isWrappable:!1});this.game.bullets.push(e),this.game.bullets.push(t)};const h=[0,64,128,192,256,320,384,448];let c=0,l=0;r.prototype.draw=function(){if(++l<6)return ctx.drawImage(this.image,h[c],0,this.width,this.height,this.pos[0],this.pos[1],this.width/2,this.height/2);l=0,ctx.drawImage(this.image,h[c],0,this.width,this.height,this.pos[0],this.pos[1],this.width/2,this.height/2),++c>=h.length&&(c=0)},t.exports=r},function(t,e,s){const i=s(7);function o(t){this.game=new i,this.ctx=t,this.clock=window.ctx=this.ctx}o.prototype.start=function(){this.bindKeyHandlers(),window.gameFunc=setInterval(()=>{window.paused||(this.game.step(),this.game.draw(this.ctx))},20)},o.prototype.bindKeyHandlers=function(){key("space",()=>{this.game.scarecrow.fireBullet()})},t.exports=o}]);
//# sourceMappingURL=main.js.map